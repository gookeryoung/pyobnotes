---
aliases: ndarray.数组维度理解
tags: ndarray.数组维度理解
title: 02.ndarray.数组维度理解
date created: 星期四, 十月 6日 2022, 10:44:15 晚上
date modified: 星期四, 十月 6日 2022, 10:58:33 晚上
---

# 02.ndarray.数组维度理解

关于 `ndarray`，数组维度元组 `shape` 是需要理解的基本特征。

可以采取 `逆向` 分析方法理解其在每个维度下包含了多少个元素，即 `shape` 形如 `(x1, x2, …, xn)` 的数组，可进行如下分析：

- 最内层：包含了 `xn` 个元素；
- 倒数第 2 层：包含了 `x(n-1)` 个含有 `xn` 个元素的二维数组；
- 依此类推…
- 第 2 层：包含了 `x2` 个含有 `x3` 个…的 `n-1` 维数组；
- 第 1 层：包含了 `x1` 个含有 `x2` 个…的 `n` 维数组。

例如，要构造一个 `shape` 是 (2, 3, 3, 2) 的数组，可以采用以下步骤：

- 构造最内层，1 维 2 元素：`[1, 2]`；
- 构造倒数第 2 层，2 维 3×2 元素，由 3 个最内层组成：`[[1, 2], [1, 2], [1, 2]]`；
- 构造第 2 层：3 维度 3×3×2 元素，由 3 个倒数第 2 层组成：`[[[1, 2], [1, 2], [1, 2]], [[1, 2], [1, 2], [1, 2]], [[1, 2], [1, 2], [1, 2]]]`
- 构造第 1 层：4 维度 2×3×3×2 元素，由 2 个第 2 层组成：`[[[[1, 2], [1, 2], [1, 2]], [[1, 2], [1, 2], [1, 2]], [[1, 2], [1, 2], [1, 2]]], [[[1, 2], [1, 2], [1, 2]], [[1, 2], [1, 2], [1, 2]], [[1, 2], [1, 2], [1, 2]]]]`

示例代码：

```python
import numpy as np

arr = np.array(
	[[[[1, 2], [1, 2], [1, 2]], [[1, 2], [1, 2], [1, 2]], [[1, 2], [1, 2], [1, 2]]], [[[1, 2], [1, 2], [1, 2]], [[1, 2], [1, 2], [1, 2]], [[1, 2], [1, 2], [1, 2]]]],
	np.int16
)
print(arr.shape, arr.size, arr.nbytes)
```

```python
(2, 3, 3, 2) 36 72
```
